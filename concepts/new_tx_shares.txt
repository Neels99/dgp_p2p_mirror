Проблема1: Обновленная NewNode#1 получает шару от другой обновленной NewNode#2, которая, в свою очередь, получила шару от НЕ обновленной OldNode#3.

OldNode#3 считает шару нормальной; NewNode#2 ищет другие обновленные ноды, у которых есть эта шара, дабы получить пакет данных, который передается между обновленными нодами; NewNode#1 считает, что отсутствие пакета данных — норма, потому что получила эту шару от обновленной ноды.

Решение: У пакета данных обновленной шары будет 3 состояния:
1) Пустое — реальное отсутствие данных.
2) Неопределенное — нода не знает, есть ли данные и какие они, потому ищет другие обновленные ноды, чтобы узнать у них это. Как правило, такое состояние она получает при получении шары от не обновленной ноды с пометкой в coinbase, либо если получает помеченную шару от обновленной ноды, у которой тоже "неопределенное" состояние шары.
3) Сами данные, которые указывают на то, что состояние не "неопределенное" и не "пустое".

Проблема 2:
Обновленная NewNode#1 получает шару от другой НЕ обновленной OldNode#3, которая сгенерирована обновленной нодой NewNode#2. Как ей получить дополнительные данные этой шары?

Подводные камни:
1) Если шара новой версии с дополнительными данными была сгенерирована обновленной нодой, которая по каким-то причинам успела передать эту шару только нодам старой версии и после этого отключилась, как остальные ноды с новой версией смогут получить дополнительные данные?

Возможные решения некоторых проблем:
1) Если нода с новой версией не подключена ни к одному пиру с новой версией, то она функционирует только как нода старой версии, как только в списке ее пиров появляется нода с новой версией, она должна подтянуть все недостающие данные о шарах с новой версией протокола и переключиться в режим расширенного функционала с обменными операциями и дополнительными транзакциями в шарах.

Подводные камни:
1) Как в таком случае убедиться, что шара принятая от другой ноды с новой версией протокола является верной? Что это не мошеннические действия со стороны какого-то злоумышленника, пытающегося внедрить в сеть подложные данные об операциях?
